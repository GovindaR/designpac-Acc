!function(e,t){"object"==typeof exports?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e)}(this,function(e){function t(e){this._targetElement="undefined"!=typeof e.length?e:[e],"undefined"==typeof window._progressjsId&&(window._progressjsId=1),"undefined"==typeof window._progressjsIntervals&&(window._progressjsIntervals={}),this._options={theme:"blue",overlayMode:!1,considerTransition:!0}}function r(){"undefined"!=typeof this._onBeforeStartCallback&&this._onBeforeStartCallback.call(this),f.call(this);for(var e=0,t=this._targetElement.length;t>e;e++)n.call(this,this._targetElement[e])}function n(e){if(!e.hasAttribute("data-progressjs")){var t=d.call(this,e);e.setAttribute("data-progressjs",window._progressjsId);var r=document.createElement("div");r.className="progressjs-progress progressjs-theme-"+this._options.theme,r.style.position="body"===e.tagName.toLowerCase()?"fixed":"absolute",r.setAttribute("data-progressjs",window._progressjsId);var n=document.createElement("div");n.className="progressjs-inner";var s=document.createElement("div");s.className="progressjs-percent",s.innerHTML="1%",n.appendChild(s),this._options.overlayMode&&"body"===e.tagName.toLowerCase()?(r.style.left=0,r.style.right=0,r.style.top=0,r.style.bottom=0):(r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=t.width+"px",this._options.overlayMode&&(r.style.height=t.height+"px")),r.appendChild(n);var i=document.querySelector(".progressjs-container");i.appendChild(r),o(e,1),++window._progressjsId}}function s(e){for(var t=0,r=this._targetElement.length;r>t;t++)o.call(this,this._targetElement[t],e)}function o(e,t){var r=this;t>=100&&(t=100),e.hasAttribute("data-progressjs")&&setTimeout(function(){"undefined"!=typeof r._onProgressCallback&&r._onProgressCallback.call(r,e,t);var n=i(e);n.style.width=parseInt(t)+"%",document.getElementById("percent-showing").innerHTML=t+"%";var n=n.querySelector(".progressjs-percent"),s=parseInt(n.innerHTML.replace("%",""));!function(e,t,r){function n(e,t,r){var i=Math.abs(t-r);3>i?o=30:20>i?o=20:intervanIn=1,t-r!=0&&(e.innerHTML=(s?++t:--t)+"%",setTimeout(function(){n(e,t,r)},o))}var s=!0;t>r&&(s=!1);var o=10;n(e,t,r)}(n,s,parseInt(t))},50)}function i(e){var t=parseInt(e.getAttribute("data-progressjs"));return document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+t+'"] > .progressjs-inner')}function a(e,t){var r=this,n=parseInt(this._targetElement[0].getAttribute("data-progressjs"));"undefined"!=typeof window._progressjsIntervals[n]&&clearInterval(window._progressjsIntervals[n]),window._progressjsIntervals[n]=setInterval(function(){l.call(r,e)},t)}function l(e){for(var t=0,r=this._targetElement.length;r>t;t++){var n=this._targetElement[t];if(n.hasAttribute("data-progressjs")){var s=i(n),a=parseInt(s.style.width.replace("%",""));a&&o.call(this,n,a+(e||1))}}}function c(){"undefined"!=typeof this._onBeforeEndCallback&&(this._options.considerTransition===!0?i(this._targetElement[0]).addEventListener(u(),this._onBeforeEndCallback,!1):this._onBeforeEndCallback.call(this));for(var e=parseInt(this._targetElement[0].getAttribute("data-progressjs")),t=0,r=this._targetElement.length;r>t;t++){var n=this._targetElement[t],s=i(n);if(!s)return;var a=parseInt(s.style.width.replace("%","")),l=1;100>a&&(o.call(this,n,100),l=500),function(e,t){setTimeout(function(){e.parentNode.className+=" progressjs-end",setTimeout(function(){e.parentNode.parentNode.removeChild(e.parentNode),t.removeAttribute("data-progressjs")},1e3)},l)}(s,n)}if(window._progressjsIntervals[e])try{clearInterval(window._progressjsIntervals[e]),window._progressjsIntervals[e]=null,delete window._progressjsIntervals[e]}catch(c){}}function f(){if(!document.querySelector(".progressjs-container")){var e=document.createElement("div");e.className="progressjs-container",document.body.appendChild(e)}}function d(e){var t={};"body"===e.tagName.toLowerCase()?(t.width=e.clientWidth,t.height=e.clientHeight):(t.width=e.offsetWidth,t.height=e.offsetHeight);for(var r=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)r+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return t.top=n,t.left=r,t}function p(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function u(){var e,t=document.createElement("fakeelement"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]}var h="0.1.0",g=function(e){if("object"==typeof e)return new t(e);if("string"==typeof e){var r=document.querySelectorAll(e);if(r)return new t(r);throw new Error("There is no element with given selector.")}return new t(document.body)};return g.version=h,g.fn=t.prototype={clone:function(){return new t(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){return this._options=p(this._options,e),this},start:function(){return r.call(this),this},set:function(e){return s.call(this,e),this},increase:function(e){return l.call(this,e),this},autoIncrease:function(e,t){return a.call(this,e,t),this},end:function(){return c.call(this),this},onbeforeend:function(e){if("function"!=typeof e)throw new Error("Provided callback for onbeforeend was not a function");return this._onBeforeEndCallback=e,this},onbeforestart:function(e){if("function"!=typeof e)throw new Error("Provided callback for onbeforestart was not a function");return this._onBeforeStartCallback=e,this},onprogress:function(e){if("function"!=typeof e)throw new Error("Provided callback for onprogress was not a function");return this._onProgressCallback=e,this}},e.progressJs=g,g});